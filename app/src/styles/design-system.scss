/**
 * Campus Food Delivery - Design System Variables
 * 校园订餐小程序设计系统变量
 * 
 * Usage: @import '@/styles/design-system.scss';
 */

// ==================== 色彩系统 ====================

// 主色板
$color-primary: #FF6B00 !default;           // 品牌主色 - 橙色系
$color-secondary: #FF9F43 !default;         // 次要色 - 浅橙色
$color-accent: #FF4500 !default;            // 强调色 - CTA按钮

// 中性色
$color-background: #F5F5F5 !default;        // 页面背景
$color-surface: #FFFFFF !default;           // 卡片/表面背景
$color-text-primary: #1A1A1A !default;      // 主文字
$color-text-secondary: #666666 !default;    // 次要文字
$color-text-tertiary: #999999 !default;     // 辅助文字
$color-border: #E8E8E8 !default;            // 边框/分割线

// 功能色
$color-success: #00B894 !default;           // 成功/完成
$color-warning: #FDCB6E !default;           // 警告/提示
$color-error: #E74C3C !default;             // 错误/危险
$color-info: #3498DB !default;              // 信息

// 价格相关
$color-price: #E74C3C !default;             // 价格（红色更醒目）
$color-price-original: #999999 !default;    // 原价

// 特殊状态
$color-disabled: #CCCCCC !default;          // 禁用状态
$color-mask: rgba(0, 0, 0, 0.5) !default;   // 遮罩层

// 渐变色
$gradient-primary: linear-gradient(135deg, #FF6B00 0%, #FF9F43 100%);
$gradient-accent: linear-gradient(135deg, #FF4500 0%, #FF6B00 100%);
$gradient-header: linear-gradient(135deg, #FF6B00 0%, #FF9F43 50%, #FFB347 100%);

// ==================== 间距系统 ====================

// 基础单位 (用于 rpx 转换，1px = 2rpx)
$space-unit: 8rpx !default;

// 间距变量
$space-xs: $space-unit !default;            // 8rpx - 图标间距
$space-sm: $space-unit * 2 !default;        // 16rpx - 小间距
$space-md: $space-unit * 4 !default;        // 32rpx - 标准间距
$space-lg: $space-unit * 6 !default;        // 48rpx - 大间距
$space-xl: $space-unit * 8 !default;        // 64rpx - 特大间距
$space-2xl: $space-unit * 12 !default;      // 96rpx - 页面间距

// ==================== 圆角系统 ====================

$radius-sm: 8rpx !default;                  // 小按钮、标签
$radius-md: 16rpx !default;                 // 卡片、输入框
$radius-lg: 24rpx !default;                 // 大卡片
$radius-xl: 32rpx !default;                 // 弹窗
$radius-full: 9999rpx !default;             // 圆形
$radius-button: 48rpx !default;             // 胶囊按钮

// ==================== 阴影系统 ====================

$shadow-sm: 0 4rpx 16rpx rgba(0, 0, 0, 0.06) !default;
$shadow-md: 0 8rpx 24rpx rgba(0, 0, 0, 0.08) !default;
$shadow-lg: 0 16rpx 48rpx rgba(0, 0, 0, 0.12) !default;
$shadow-float: 0 24rpx 64rpx rgba(0, 0, 0, 0.15) !default;
$shadow-primary: 0 8rpx 30rpx rgba(255, 107, 0, 0.25) !default;

// ==================== 字体系统 ====================

// 字体家族
$font-family-base: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'PingFang SC', 'Hiragino Sans GB', 'Microsoft YaHei', sans-serif !default;
$font-family-price: 'DIN Alternate', 'SF Pro Display', 'PingFang SC', sans-serif !default;

// 字体大小
$font-size-xs: 20rpx !default;              // 10px - 极小
$font-size-sm: 24rpx !default;              // 12px - 小字
$font-size-base: 28rpx !default;            // 14px - 正文
$font-size-md: 32rpx !default;              // 16px - 常规
$font-size-lg: 36rpx !default;              // 18px - 大标题
$font-size-xl: 40rpx !default;              // 20px - 特大标题
$font-size-price: 36rpx !default;           // 18px - 价格
$font-size-price-lg: 48rpx !default;        // 24px - 总价

// 字体粗细
$font-weight-normal: 400 !default;
$font-weight-medium: 500 !default;
$font-weight-semibold: 600 !default;
$font-weight-bold: 700 !default;

// 行高
$line-height-tight: 1.2 !default;
$line-height-normal: 1.5 !default;
$line-height-relaxed: 1.6 !default;

// ==================== 尺寸系统 ====================

// 高度规范
$height-button: 88rpx !default;             // 44px - 按钮最小高度
$height-input: 88rpx !default;              // 44px - 输入框高度
$height-navbar: 88rpx !default;             // 44px - 导航栏
$height-tabbar: 166rpx !default;            // 83px - TabBar（含安全区域）
$height-avatar-sm: 64rpx !default;          // 32px
$height-avatar-md: 80rpx !default;          // 40px
$height-avatar-lg: 120rpx !default;         // 60px

// 触摸目标最小尺寸
$touch-target-min: 88rpx !default;          // 44px - 移动端最小点击区域

// 图片尺寸
$img-size-sm: 120rpx !default;              // 60px
$img-size-md: 160rpx !default;              // 80px
$img-size-lg: 200rpx !default;              // 100px
$img-size-xl: 240rpx !default;              // 120px

// ==================== 动画系统 ====================

// 持续时间
$duration-instant: 100ms !default;
$duration-fast: 150ms !default;
$duration-normal: 200ms !default;
$duration-slow: 300ms !default;
$duration-slower: 400ms !default;

// 缓动函数
$ease-out: cubic-bezier(0.4, 0, 0.2, 1) !default;
$ease-in-out: cubic-bezier(0.4, 0, 0.6, 1) !default;
$ease-bounce: cubic-bezier(0.68, -0.55, 0.265, 1.55) !default;
$ease-spring: cubic-bezier(0.175, 0.885, 0.32, 1.275) !default;

// ==================== Z-Index 层级 ====================

$z-base: 1 !default;
$z-dropdown: 100 !default;
$z-sticky: 200 !default;
$z-fixed: 300 !default;
$z-modal-backdrop: 400 !default;
$z-modal: 500 !default;
$z-popover: 600 !default;
$z-tooltip: 700 !default;
$z-toast: 800 !default;
$z-loading: 900 !default;

// ==================== 响应式断点 ====================

// 移动端标准尺寸（uni-app rpx 基于 750px 设计稿）
$screen-xs: 375px !default;                 // iPhone SE/8
$screen-sm: 390px !default;                 // iPhone 12/13/14
$screen-md: 414px !default;                 // iPhone Plus/Max
$screen-lg: 768px !default;                 // iPad Mini

// ==================== Mixins ====================

// Flexbox 居中
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

// Flexbox 两端对齐
@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

// 文字省略
@mixin text-ellipsis {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// 多行文字省略
@mixin text-ellipsis-multi($lines: 2) {
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
  overflow: hidden;
}

// 安全区域适配
@mixin safe-area-bottom {
  padding-bottom: constant(safe-area-inset-bottom);
  padding-bottom: env(safe-area-inset-bottom);
}

// 禁用选中
@mixin no-select {
  user-select: none;
  -webkit-user-select: none;
}

// 硬件加速
@mixin gpu-accelerate {
  transform: translateZ(0);
  will-change: transform;
}

// 点击反馈
@mixin tap-highlight {
  &:active {
    opacity: 0.8;
    transform: scale(0.98);
    transition: all $duration-fast $ease-out;
  }
}

// 卡片基础样式
@mixin card-base {
  background: $color-surface;
  border-radius: $radius-md;
  box-shadow: $shadow-sm;
}

// 按钮基础样式
@mixin button-base {
  @include flex-center;
  min-height: $height-button;
  border-radius: $radius-button;
  font-size: $font-size-base;
  font-weight: $font-weight-medium;
  transition: all $duration-normal $ease-out;
  cursor: pointer;
  
  &:active {
    transform: scale(0.98);
    opacity: 0.9;
  }
  
  &:disabled {
    background: $color-disabled !important;
    color: #fff !important;
    cursor: not-allowed;
  }
}

// 主按钮样式
@mixin button-primary {
  @include button-base;
  background: $gradient-primary;
  color: #fff;
  box-shadow: $shadow-primary;
}

// 次要按钮样式
@mixin button-secondary {
  @include button-base;
  background: transparent;
  color: $color-primary;
  border: 2rpx solid $color-primary;
}

// 输入框基础样式
@mixin input-base {
  height: $height-input;
  padding: 0 $space-md;
  border: 2rpx solid $color-border;
  border-radius: $radius-md;
  font-size: $font-size-base;
  background: $color-surface;
  transition: all $duration-normal $ease-out;
  
  &:focus {
    border-color: $color-primary;
    outline: none;
    box-shadow: 0 0 0 6rpx rgba(255, 107, 0, 0.1);
  }
  
  &::placeholder {
    color: $color-text-tertiary;
  }
  
  &.is-error {
    border-color: $color-error;
  }
}

// 标签样式
@mixin tag-base($bg-color, $text-color) {
  display: inline-flex;
  align-items: center;
  padding: $space-xs $space-sm;
  border-radius: $radius-sm;
  font-size: $font-size-xs;
  font-weight: $font-weight-medium;
  background: $bg-color;
  color: $text-color;
}

// 价格样式
@mixin price-style {
  font-family: $font-family-price;
  font-size: $font-size-price;
  font-weight: $font-weight-bold;
  color: $color-price;
}

// ==================== CSS Variables (全局) ====================

:root {
  // 颜色变量
  --color-primary: #{$color-primary};
  --color-secondary: #{$color-secondary};
  --color-accent: #{$color-accent};
  --color-background: #{$color-background};
  --color-surface: #{$color-surface};
  --color-text-primary: #{$color-text-primary};
  --color-text-secondary: #{$color-text-secondary};
  --color-text-tertiary: #{$color-text-tertiary};
  --color-border: #{$color-border};
  --color-success: #{$color-success};
  --color-warning: #{$color-warning};
  --color-error: #{$color-error};
  --color-price: #{$color-price};
  
  // 间距变量
  --space-xs: #{$space-xs};
  --space-sm: #{$space-sm};
  --space-md: #{$space-md};
  --space-lg: #{$space-lg};
  --space-xl: #{$space-xl};
  
  // 圆角变量
  --radius-sm: #{$radius-sm};
  --radius-md: #{$radius-md};
  --radius-lg: #{$radius-lg};
  --radius-xl: #{$radius-xl};
  
  // 阴影变量
  --shadow-sm: #{$shadow-sm};
  --shadow-md: #{$shadow-md};
  --shadow-lg: #{$shadow-lg};
}

// ==================== 通用工具类 ====================

// 显示/隐藏
.hide { display: none !important; }
.show { display: block !important; }
.invisible { visibility: hidden !important; }

// Flex 布局工具
.flex { display: flex !important; }
.flex-col { flex-direction: column !important; }
.flex-wrap { flex-wrap: wrap !important; }
.flex-center { @include flex-center; }
.flex-between { @include flex-between; }
.flex-1 { flex: 1 !important; }
.flex-none { flex: none !important; }

// 文字对齐
.text-left { text-align: left !important; }
.text-center { text-align: center !important; }
.text-right { text-align: right !important; }

// 文字样式
.text-primary { color: $color-text-primary !important; }
.text-secondary { color: $color-text-secondary !important; }
.text-tertiary { color: $color-text-tertiary !important; }
.text-primary-color { color: $color-primary !important; }
.text-success { color: $color-success !important; }
.text-warning { color: $color-warning !important; }
.text-error { color: $color-error !important; }

// 背景色
.bg-primary { background-color: $color-primary !important; }
.bg-secondary { background-color: $color-secondary !important; }
.bg-background { background-color: $color-background !important; }
.bg-surface { background-color: $color-surface !important; }

// 边距工具
.m-0 { margin: 0 !important; }
.mt-sm { margin-top: $space-sm !important; }
.mt-md { margin-top: $space-md !important; }
.mb-sm { margin-bottom: $space-sm !important; }
.mb-md { margin-bottom: $space-md !important; }
.ml-sm { margin-left: $space-sm !important; }
.mr-sm { margin-right: $space-sm !important; }

// 内边距工具
.p-0 { padding: 0 !important; }
.p-sm { padding: $space-sm !important; }
.p-md { padding: $space-md !important; }
.px-md { padding-left: $space-md !important; padding-right: $space-md !important; }
.py-md { padding-top: $space-md !important; padding-bottom: $space-md !important; }

// 圆角工具
.rounded-sm { border-radius: $radius-sm !important; }
.rounded-md { border-radius: $radius-md !important; }
.rounded-lg { border-radius: $radius-lg !important; }
.rounded-full { border-radius: $radius-full !important; }

// 阴影工具
.shadow-sm { box-shadow: $shadow-sm !important; }
.shadow-md { box-shadow: $shadow-md !important; }
.shadow-lg { box-shadow: $shadow-lg !important; }

// 文字省略
.ellipsis { @include text-ellipsis; }
.ellipsis-2 { @include text-ellipsis-multi(2); }

// 安全区域
.safe-area-bottom { @include safe-area-bottom; }

// 禁用状态
.disabled {
  opacity: 0.5;
  pointer-events: none;
}

// ==================== 暗黑模式 ====================

// 暗黑模式颜色变量
$dark-color-background: #1A1A1A !default;
$dark-color-surface: #2D2D2D !default;
$dark-color-surface-elevated: #3D3D3D !default;
$dark-color-text-primary: #FFFFFF !default;
$dark-color-text-secondary: #B0B0B0 !default;
$dark-color-text-tertiary: #808080 !default;
$dark-color-border: #404040 !default;

// 暗黑模式媒体查询
@media (prefers-color-scheme: dark) {
  page {
    --color-background: #{$dark-color-background};
    --color-surface: #{$dark-color-surface};
    --color-text-primary: #{$dark-color-text-primary};
    --color-text-secondary: #{$dark-color-text-secondary};
    --color-text-tertiary: #{$dark-color-text-tertiary};
    --color-border: #{$dark-color-border};
    
    background-color: $dark-color-background;
    color: $dark-color-text-primary;
  }
  
  .c-card,
  .c-list {
    background-color: $dark-color-surface;
  }
  
  .c-input {
    background-color: $dark-color-surface;
    border-color: $dark-color-border;
    color: $dark-color-text-primary;
  }
}

// 手动暗黑模式类
.dark-mode {
  --color-background: #{$dark-color-background};
  --color-surface: #{$dark-color-surface};
  --color-text-primary: #{$dark-color-text-primary};
  --color-text-secondary: #{$dark-color-text-secondary};
  --color-text-tertiary: #{$dark-color-text-tertiary};
  --color-border: #{$dark-color-border};
}

// ==================== 动画系统 ====================

// 淡入动画
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

// 淡入上移
@keyframes fadeInUp {
  from {
    opacity: 0;
    transform: translateY(20rpx);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 淡入下移
@keyframes fadeInDown {
  from {
    opacity: 0;
    transform: translateY(-20rpx);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

// 缩放弹出
@keyframes scaleIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

// 弹跳动画
@keyframes bounce {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.1); }
}

// 摇晃动画
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5rpx); }
  75% { transform: translateX(5rpx); }
}

// 骨架屏加载动画
@keyframes skeleton-loading {
  0% { background-position: 200% 0; }
  100% { background-position: -200% 0; }
}

// 旋转动画
@keyframes spin {
  from { transform: rotate(0deg); }
  to { transform: rotate(360deg); }
}

// 脉冲动画
@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

// 滑入动画（从右）
@keyframes slideInRight {
  from {
    opacity: 0;
    transform: translateX(100%);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

// 滑出动画（向右）
@keyframes slideOutRight {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(100%);
  }
}

// 浮动动画
@keyframes float {
  0%, 100% { transform: translateY(0); }
  50% { transform: translateY(-10rpx); }
}

// 呼吸动画
@keyframes breathe {
  0%, 100% { transform: scale(1); opacity: 1; }
  50% { transform: scale(1.05); opacity: 0.8; }
}

// 动画混入
@mixin animate-fade-in($duration: 300ms) {
  animation: fadeIn $duration $ease-out forwards;
}

@mixin animate-fade-in-up($duration: 300ms) {
  animation: fadeInUp $duration $ease-out forwards;
}

@mixin animate-scale-in($duration: 250ms) {
  animation: scaleIn $duration $ease-spring forwards;
}

@mixin animate-bounce($duration: 300ms) {
  animation: bounce $duration $ease-bounce;
}

@mixin animate-shake($duration: 300ms) {
  animation: shake $duration ease-in-out;
}

@mixin animate-spin($duration: 1s) {
  animation: spin $duration linear infinite;
}

@mixin animate-pulse($duration: 2s) {
  animation: pulse $duration ease-in-out infinite;
}

@mixin animate-float($duration: 3s) {
  animation: float $duration ease-in-out infinite;
}

@mixin animate-breathe($duration: 2s) {
  animation: breathe $duration ease-in-out infinite;
}

// 交错动画延迟混入
@mixin stagger-animation($index, $delay: 50ms) {
  animation-delay: $index * $delay;
}

// 减少动画（无障碍）
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

// 动画工具类
.animate-fade-in { @include animate-fade-in; }
.animate-fade-in-up { @include animate-fade-in-up; }
.animate-scale-in { @include animate-scale-in; }
.animate-bounce { @include animate-bounce; }
.animate-shake { @include animate-shake; }
.animate-spin { @include animate-spin; }
.animate-pulse { @include animate-pulse; }
.animate-float { @include animate-float; }

// 动画延迟类
.delay-100 { animation-delay: 100ms; }
.delay-200 { animation-delay: 200ms; }
.delay-300 { animation-delay: 300ms; }

// ==================== 无障碍设计 ====================

// 焦点样式
@mixin focus-ring {
  outline: none;
  box-shadow: 0 0 0 4rpx rgba(255, 107, 0, 0.3);
}

// 屏幕阅读器专用（仅对屏幕阅读器可见）
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// 高对比度模式支持
@media (prefers-contrast: high) {
  .c-btn,
  .c-input,
  .c-card {
    border-width: 2rpx;
  }
}

// 触摸目标最小尺寸检查
.touch-target {
  min-width: 88rpx;
  min-height: 88rpx;
}

// ==================== 打印样式 ====================

@media print {
  .no-print {
    display: none !important;
  }
  
  .print-only {
    display: block !important;
  }
}
